<section>
  <%= render partial: 'layouts/notifications' %>

  <br><br>

  <h1>Transactions</h1>
  <small>Create transactions to track spending in the dashboard.</small>
  <br>
  <small>Transactions under the "Income", "Savings", and "Investing" categories are special in that they're aggregated separately in the dashboard.</small>
  <br>
  <small>Transactions with the "Income" or "Dividends" category will be <span style='color: #5AC33B'>green</span>.</small>
  <br>
  <small>Transactions with the "Savings" category will be <span style='color: cyan'>cyan</span>.</small>
  <br>
  <small>Transactions with the "Investing" category will be <span style='color: cyan'>cyan</span>.</small>
  <br>
  <small>All other transaction categories will fall under expenses and will be <span style='color: red'>red</span>.</small>
  <br><br>
  <button><%= link_to 'Create Transaction', new_transaction_path, class: '' %></button>
  <button><%= link_to 'Download Transactions as JSON', transactions_download_path, class: '' %></button>

  <% if @transactions.empty? %>
    <p>No existing transactions. Create one!</p>
  <% else %>
    <table>
      <thead>
        <tr>
          <th>Category</th>
          <th>Date</th>
          <th>Amount</th>
          <th>Notes</th>
          <th>Edit</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <% @transactions.sorted_by_date.each do |transaction| %>
          <tr>
            <td><%= transaction.category %></td>
            <td><%= transaction.date %></td>
            <% if transaction.category. == "Income" %>
              <td style='color: #5AC33B'><%= humanized_money_with_symbol transaction.amount %></td>
            <% elsif transaction.category. == "Savings" %>
              <td style='color: cyan'><%= humanized_money_with_symbol transaction.amount %></td>
            <% elsif transaction.category. == "Investing" %>
              <td style='color: cyan'><%= humanized_money_with_symbol transaction.amount %></td>
            <% else %>
              <td style='color: red'><%= humanized_money_with_symbol transaction.amount %></td>
            <% end %>
            <td><%= transaction.notes %></td>
            <td>
              <%= link_to edit_transaction_path(transaction.id), class: '' do %>Edit<% end %>
            </td>
            <td>
              <%= link_to transaction_path(transaction.id), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this transaction?", class: ''} do %>Delete<% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</section>
