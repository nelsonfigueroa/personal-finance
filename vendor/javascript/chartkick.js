var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var e={};(function(t,r){e=r()})(0,(function(){function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function isFunction(t){return t instanceof Function}function isPlainObject(t){return"[object Object]"===Object.prototype.toString.call(t)&&!isFunction(t)&&t instanceof Object}function extend(t,e){var r;for(r in e)if("__proto__"!==r)if(isPlainObject(e[r])||isArray(e[r])){isPlainObject(e[r])&&!isPlainObject(t[r])&&(t[r]={});isArray(e[r])&&!isArray(t[r])&&(t[r]=[]);extend(t[r],e[r])}else void 0!==e[r]&&(t[r]=e[r])}function merge(t,e){var r={};extend(r,t);extend(r,e);return r}var e=/^(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)$/i;function negativeValues(t){var e,r,a;for(e=0;e<t.length;e++){a=t[e].data;for(r=0;r<a.length;r++)if(a[r][1]<0)return true}return false}function toStr(t){return""+t}function toFloat(t){return parseFloat(t)}function toDate(t){var r,a,o,n;if("object"!==typeof t)if("number"===typeof t)t=new Date(1e3*t);else{t=toStr(t);if(r=t.match(e)){a=parseInt(r[1],10);o=parseInt(r[3],10)-1;n=parseInt(r[5],10);return new Date(a,o,n)}var i=t.replace(/ /,"T").replace(" ","").replace("UTC","Z");t=new Date(Date.parse(i)||t)}return t}function toArr(t){if(!isArray(t)){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push([e,t[e]]);t=r}return t}function jsOptionsFunc(t,e,r,a,o,n,i,s){return function(l,c,p){var u=l.data;var h=merge({},t);h=merge(h,p||{});(l.singleSeriesFormat||"legend"in c)&&e(h,c.legend,l.singleSeriesFormat);c.title&&r(h,c.title);"min"in c?a(h,c.min):negativeValues(u)||a(h,0);c.max&&o(h,c.max);"stacked"in c&&n(h,c.stacked);c.colors&&(h.colors=c.colors);c.xtitle&&i(h,c.xtitle);c.ytitle&&s(h,c.ytitle);h=merge(h,c.library||{});return h}}function sortByTime(t,e){return t[0].getTime()-e[0].getTime()}function sortByNumberSeries(t,e){return t[0]-e[0]}function sortByNumber(t,e){return t-e}function isMinute(t){return 0===t.getMilliseconds()&&0===t.getSeconds()}function isHour(t){return isMinute(t)&&0===t.getMinutes()}function isDay(t){return isHour(t)&&0===t.getHours()}function isWeek(t,e){return isDay(t)&&t.getDay()===e}function isMonth(t){return isDay(t)&&1===t.getDate()}function isYear(t){return isMonth(t)&&0===t.getMonth()}function isDate(t){return!isNaN(toDate(t))&&toStr(t).length>=6}function isNumber(t){return"number"===typeof t}var r=["bytes","KB","MB","GB","TB","PB","EB"];function formatValue(t,e,a,o){t=t||"";if(a.prefix){if(e<0){e*=-1;t+="-"}t+=a.prefix}var n=a.suffix||"";var i=a.precision;var s=a.round;if(a.byteScale){var l;var c=o?a.byteScale:e;if(c>=0x1000000000000000){e/=0x1000000000000000;l=6}else if(c>=0x4000000000000){e/=0x4000000000000;l=5}else if(c>=1099511627776){e/=1099511627776;l=4}else if(c>=1073741824){e/=1073741824;l=3}else if(c>=1048576){e/=1048576;l=2}else if(c>=1024){e/=1024;l=1}else l=0;if(void 0===i&&void 0===s){if(e>=1023.5&&l<r.length-1){e=1;l+=1}i=e>=1e3?4:3}n=" "+r[l]}if(void 0!==i&&void 0!==s)throw Error("Use either round or precision, not both");if(!o){if(void 0!==i){e=e.toPrecision(i);a.zeros||(e=parseFloat(e))}if(void 0!==s)if(s<0){var p=Math.pow(10,-1*s);e=parseInt((1*e/p).toFixed(0))*p}else{e=e.toFixed(s);a.zeros||(e=parseFloat(e))}}if(a.thousands||a.decimal){e=toStr(e);var u=e.split(".");e=u[0];a.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,a.thousands));u.length>1&&(e+=(a.decimal||".")+u[1])}return t+e+n}function seriesOption(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}function allZeros(t){var e,r,a;for(e=0;e<t.length;e++){a=t[e].data;for(r=0;r<a.length;r++)if(0!=a[r][1])return false}return true}var a={maintainAspectRatio:false,animation:false,plugins:{legend:{},tooltip:{displayColors:false,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}};var o={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:false},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}};var n=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];var hideLegend$2=function(t,e,r){if(void 0!==e){t.plugins.legend.display=!!e;e&&true!==e&&(t.plugins.legend.position=e)}else r&&(t.plugins.legend.display=false)};var setTitle$2=function(t,e){t.plugins.title.display=true;t.plugins.title.text=e};var setMin$2=function(t,e){null!==e&&(t.scales.y.min=toFloat(e))};var setMax$2=function(t,e){t.scales.y.max=toFloat(e)};var setBarMin$1=function(t,e){null!==e&&(t.scales.x.min=toFloat(e))};var setBarMax$1=function(t,e){t.scales.x.max=toFloat(e)};var setStacked$2=function(t,e){t.scales.x.stacked=!!e;t.scales.y.stacked=!!e};var setXtitle$2=function(t,e){t.scales.x.title.display=true;t.scales.x.title.text=e};var setYtitle$2=function(t,e){t.scales.y.title.display=true;t.scales.y.title.text=e};var addOpacity=function(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")":t};var notnull=function(t){return null!=t};var setLabelSize=function(t,e,r){var a=Math.ceil(t.element.offsetWidth/4/e.labels.length);a>25?a=25:a<10&&(a=10);r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(t){t=toStr(this.getLabelForValue(t));return t.length>a?t.substring(0,a-2)+"...":t})};var setFormatOptions$1=function(t,e,r){var a={prefix:t.options.prefix,suffix:t.options.suffix,thousands:t.options.thousands,decimal:t.options.decimal,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros};if(t.options.bytes){var o=t.data;"pie"===r&&(o=[{data:o}]);var n=0;for(var i=0;i<o.length;i++){var s=o[i];for(var l=0;l<s.data.length;l++)s.data[l][1]>n&&(n=s.data[l][1])}var c=1;while(n>=1024){c*=1024;n/=1024}a.byteScale=c}if("pie"!==r){var p=e.scales.y;"bar"===r&&(p=e.scales.x);if(a.byteScale){p.ticks.stepSize||(p.ticks.stepSize=a.byteScale/2);p.ticks.maxTicksLimit||(p.ticks.maxTicksLimit=4)}p.ticks.callback||(p.ticks.callback=function(t){return formatValue("",t,a,true)})}if(!e.plugins.tooltip.callbacks.label)if("scatter"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");return e+"("+t.label+", "+t.formattedValue+")"};else if("bubble"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.dataset.label||"";e&&(e+=": ");var r=t.raw;return e+"("+r.x+", "+r.y+", "+r.v+")"};else if("pie"===r)e.plugins.tooltip.callbacks.label=function(t){var e=t.label;var r=": ";if(isArray(e)){e=e.slice();e[0]+=r}else e+=r;return formatValue(e,t.parsed,a)};else{var u="bar"===r?"x":"y";e.plugins.tooltip.callbacks.label=function(t){if(null!==t.parsed[u]){var e=t.dataset.label||"";e&&(e+=": ");return formatValue(e,t.parsed[u],a)}}}};var i=jsOptionsFunc(merge(a,o),hideLegend$2,setTitle$2,setMin$2,setMax$2,setStacked$2,setXtitle$2,setYtitle$2);var createDataTable=function(t,e,r){var a=[];var o=[];var i=t.options.colors||n;var s=true;var l=true;var c;var p=true;var u=true;var h=true;var d=true;var f=t.data;var v=0;if("bubble"===r)for(var m=0;m<f.length;m++){var y=f[m];for(var g=0;g<y.data.length;g++)y.data[g][2]>v&&(v=y.data[g][2])}var C,b,z,x,M,w=[],_=[];if("bar"===r||"column"===r||"number"!==t.xtype&&"bubble"!==t.xtype){var A=[];for(C=0;C<f.length;C++){z=f[C];for(b=0;b<z.data.length;b++){x=z.data[b];M="datetime"==t.xtype?x[0].getTime():x[0];w[M]||(w[M]=new Array(f.length));w[M][C]=toFloat(x[1]);-1===A.indexOf(M)&&A.push(M)}}"datetime"!==t.xtype&&"number"!==t.xtype||A.sort(sortByNumber);for(b=0;b<f.length;b++)_.push([]);var S;var D;for(D=0;D<A.length;D++){C=A[D];if("datetime"===t.xtype){S=new Date(toFloat(C));s=s&&isDay(S);c||(c=S.getDay());l=l&&isWeek(S,c);p=p&&isMonth(S);u=u&&isYear(S);h=h&&isHour(S);d=d&&isMinute(S)}else S=C;o.push(S);for(b=0;b<f.length;b++)_[b].push(void 0===w[C][b]?null:w[C][b])}}else for(var T=0;T<f.length;T++){var k=f[T];var O=[];for(var B=0;B<k.data.length;B++){var E={x:toFloat(k.data[B][0]),y:toFloat(k.data[B][1])};if("bubble"===r){E.r=20*toFloat(k.data[B][2])/v;E.v=k.data[B][2]}O.push(E)}_.push(O)}var F;var L;for(C=0;C<f.length;C++){z=f[C];if(!t.options.colors||!t.singleSeriesFormat||"bar"!==r&&"column"!==r||z.color||!isArray(t.options.colors)||isArray(t.options.colors[0])){F=z.color||i[C];L="line"!==r?addOpacity(F,.5):F}else{F=i;L=[];for(var N=0;N<i.length;N++)L[N]=addOpacity(F[N],.5)}var j={label:z.name||"",data:_[C],fill:"area"===r,borderColor:F,backgroundColor:L,borderWidth:2};var P="line"===r||"area"===r||"scatter"===r||"bubble"===r;if(P){j.pointBackgroundColor=F;j.pointHoverBackgroundColor=F;j.pointHitRadius=50}if("bubble"===r){j.pointBackgroundColor=L;j.pointHoverBackgroundColor=L;j.pointHoverBorderWidth=2}z.stack&&(j.stack=z.stack);var R=seriesOption(t,z,"curve");false===R?j.tension=0:P&&(j.tension=.4);var H=seriesOption(t,z,"points");if(false===H){j.pointRadius=0;j.pointHoverRadius=0}j=merge(j,t.options.dataset||{});j=merge(j,z.library||{});j=merge(j,z.dataset||{});a.push(j)}var V=t.options.xmin;var I=t.options.xmax;if("datetime"===t.xtype){notnull(V)&&(e.scales.x.min=toDate(V).getTime());notnull(I)&&(e.scales.x.max=toDate(I).getTime())}else if("number"===t.xtype){notnull(V)&&(e.scales.x.min=V);notnull(I)&&(e.scales.x.max=I)}if("datetime"===t.xtype&&0===o.length){notnull(V)&&o.push(toDate(V));notnull(I)&&o.push(toDate(I));s=false;l=false;p=false;u=false;h=false;d=false}if("datetime"===t.xtype&&o.length>0){var W=(notnull(V)?toDate(V):o[0]).getTime();var G=(notnull(I)?toDate(I):o[0]).getTime();for(C=1;C<o.length;C++){var U=o[C].getTime();U<W&&(W=U);U>G&&(G=U)}var J=(G-W)/864e5;if(!e.scales.x.time.unit){var Q;if(u||J>3650){e.scales.x.time.unit="year";Q=365}else if(p||J>300){e.scales.x.time.unit="month";Q=30}else if(s||J>10){e.scales.x.time.unit="day";Q=1}else if(h||J>.5){e.scales.x.time.displayFormats={hour:"MMM d, h a"};e.scales.x.time.unit="hour";Q=1/24}else if(d){e.scales.x.time.displayFormats={minute:"h:mm a"};e.scales.x.time.unit="minute";Q=1/24/60}if(Q&&J>0){var X=t.element.offsetWidth;if(X>0){var q=Math.ceil(J/Q/(X/100));l&&1===Q&&(q=7*Math.ceil(q/7));e.scales.x.time.stepSize=q}}}e.scales.x.time.tooltipFormat||(s?e.scales.x.time.tooltipFormat="PP":h?e.scales.x.time.tooltipFormat="MMM d, h a":d&&(e.scales.x.time.tooltipFormat="h:mm a"))}var Y={labels:o,datasets:a};return Y};var s=function defaultExport(e){(this||t).name="chartjs";(this||t).library=e};s.prototype.renderLineChart=function renderLineChart(t,e){var r={};!t.options.max&&allZeros(t.data)&&(r.max=1);var a=i(t,merge(r,t.options));setFormatOptions$1(t,a,e);var o=createDataTable(t,a,e||"line");if("number"===t.xtype){a.scales.x.type=a.scales.x.type||"linear";a.scales.x.position=a.scales.x.position||"bottom"}else a.scales.x.type="string"===t.xtype?"category":"time";this.drawChart(t,"line",o,a)};s.prototype.renderPieChart=function renderPieChart(t){var e=merge({},a);t.options.donut&&(e.cutout="50%");"legend"in t.options&&hideLegend$2(e,t.options.legend);t.options.title&&setTitle$2(e,t.options.title);e=merge(e,t.options.library||{});setFormatOptions$1(t,e,"pie");var r=[];var o=[];for(var i=0;i<t.data.length;i++){var s=t.data[i];r.push(s[0]);o.push(s[1])}var l={data:o,backgroundColor:t.options.colors||n};l=merge(l,t.options.dataset||{});var c={labels:r,datasets:[l]};this.drawChart(t,"pie",c,e)};s.prototype.renderColumnChart=function renderColumnChart(t,e){var r;if("bar"===e){var n=merge(a,o);n.indexAxis="y";n.scales.x.grid.drawOnChartArea=true;n.scales.y.grid.drawOnChartArea=false;delete n.scales.y.ticks.maxTicksLimit;r=jsOptionsFunc(n,hideLegend$2,setTitle$2,setBarMin$1,setBarMax$1,setStacked$2,setXtitle$2,setYtitle$2)(t,t.options)}else r=i(t,t.options);setFormatOptions$1(t,r,e);var s=createDataTable(t,r,"column");"bar"!==e&&setLabelSize(t,s,r);this.drawChart(t,"bar",s,r)};s.prototype.renderAreaChart=function renderAreaChart(t){this.renderLineChart(t,"area")};s.prototype.renderBarChart=function renderBarChart(t){this.renderColumnChart(t,"bar")};s.prototype.renderScatterChart=function renderScatterChart(t,e){e=e||"scatter";var r=i(t,t.options);setFormatOptions$1(t,r,e);"showLine"in r||(r.showLine=false);var a=createDataTable(t,r,e);r.scales.x.type=r.scales.x.type||"linear";r.scales.x.position=r.scales.x.position||"bottom";"mode"in r.interaction||(r.interaction.mode="nearest");this.drawChart(t,e,a,r)};s.prototype.renderBubbleChart=function renderBubbleChart(t){this.renderScatterChart(t,"bubble")};s.prototype.destroy=function destroy(t){t.chart&&t.chart.destroy()};s.prototype.drawChart=function drawChart(e,r,a,o){this.destroy(e);if(!e.destroyed){var n={type:r,data:a,options:o};e.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(n)+");");e.element.innerHTML="<canvas></canvas>";var i=e.element.getElementsByTagName("CANVAS")[0];e.chart=new(this||t).library(i,n)}};var l={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:false},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:false}};var hideLegend$1=function(t,e,r){if(void 0!==e){t.legend.enabled=!!e;if(e&&true!==e)if("top"===e||"bottom"===e)t.legend.verticalAlign=e;else{t.legend.layout="vertical";t.legend.verticalAlign="middle";t.legend.align=e}}else r&&(t.legend.enabled=false)};var setTitle$1=function(t,e){t.title.text=e};var setMin$1=function(t,e){t.yAxis.min=e};var setMax$1=function(t,e){t.yAxis.max=e};var setStacked$1=function(t,e){var r=e?true===e?"normal":e:null;t.plotOptions.series.stacking=r;t.plotOptions.area.stacking=r;t.plotOptions.areaspline.stacking=r};var setXtitle$1=function(t,e){t.xAxis.title.text=e};var setYtitle$1=function(t,e){t.yAxis.title.text=e};var c=jsOptionsFunc(l,hideLegend$1,setTitle$1,setMin$1,setMax$1,setStacked$1,setXtitle$1,setYtitle$1);var setFormatOptions=function(e,r,a){var o={prefix:e.options.prefix,suffix:e.options.suffix,thousands:e.options.thousands,decimal:e.options.decimal,precision:e.options.precision,round:e.options.round,zeros:e.options.zeros};"pie"===a||isArray(r.yAxis)||r.yAxis.labels.formatter||(r.yAxis.labels.formatter=function(){return formatValue("",(this||t).value,o)});r.tooltip.pointFormatter||r.tooltip.pointFormat||(r.tooltip.pointFormatter=function(){return'<span style="color:'+(this||t).color+'">●</span> '+formatValue((this||t).series.name+": <b>",(this||t).y,o)+"</b><br/>"})};var p=function defaultExport(e){(this||t).name="highcharts";(this||t).library=e};p.prototype.renderLineChart=function renderLineChart(t,e){e=e||"spline";var r={};"areaspline"===e&&(r={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:false}}}});false===t.options.curve&&("areaspline"===e?e="area":"spline"===e&&(e="line"));var a,o,n,i=c(t,t.options,r);"number"===t.xtype?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type="string"===t.xtype?"category":"datetime";i.chart.type||(i.chart.type=e);setFormatOptions(t,i,e);var s=t.data;for(o=0;o<s.length;o++){s[o].name=s[o].name||"Value";a=s[o].data;if("datetime"===t.xtype)for(n=0;n<a.length;n++)a[n][0]=a[n][0].getTime();s[o].marker={symbol:"circle"};false===t.options.points&&(s[o].marker.enabled=false)}this.drawChart(t,s,i)};p.prototype.renderScatterChart=function renderScatterChart(t){var e=c(t,t.options,{});e.chart.type="scatter";this.drawChart(t,t.data,e)};p.prototype.renderPieChart=function renderPieChart(t){var e=merge(l,{});t.options.colors&&(e.colors=t.options.colors);t.options.donut&&(e.plotOptions={pie:{innerSize:"50%"}});"legend"in t.options&&hideLegend$1(e,t.options.legend);t.options.title&&setTitle$1(e,t.options.title);var r=merge(e,t.options.library||{});setFormatOptions(t,r,"pie");var a=[{type:"pie",name:t.options.label||"Value",data:t.data}];this.drawChart(t,a,r)};p.prototype.renderColumnChart=function renderColumnChart(t,e){e=e||"column";var r=t.data;var a,o,n,i,s=c(t,t.options),l=[],p=[];s.chart.type=e;setFormatOptions(t,s,e);for(a=0;a<r.length;a++){n=r[a];for(o=0;o<n.data.length;o++){i=n.data[o];if(!l[i[0]]){l[i[0]]=new Array(r.length);p.push(i[0])}l[i[0]][a]=i[1]}}"number"===t.xtype&&p.sort(sortByNumber);s.xAxis.categories=p;var u,h=[];for(a=0;a<r.length;a++){i=[];for(o=0;o<p.length;o++)i.push(l[p[o]][a]||0);u={name:r[a].name||"Value",data:i};r[a].stack&&(u.stack=r[a].stack);h.push(u)}this.drawChart(t,h,s)};p.prototype.renderBarChart=function renderBarChart(t){this.renderColumnChart(t,"bar")};p.prototype.renderAreaChart=function renderAreaChart(t){this.renderLineChart(t,"areaspline")};p.prototype.destroy=function destroy(t){t.chart&&t.chart.destroy()};p.prototype.drawChart=function drawChart(e,r,a){this.destroy(e);if(!e.destroyed){a.chart.renderTo=e.element.id;a.series=r;e.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(a)+");");e.chart=new(this||t).library.Chart(a)}};var u={};var h=[];var d={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};var hideLegend=function(t,e,r){if(void 0!==e){var a;a=e?true===e?"right":e:"none";t.legend.position=a}else r&&(t.legend.position="none")};var setTitle=function(t,e){t.title=e;t.titleTextStyle={color:"#333",fontSize:"20px"}};var setMin=function(t,e){t.vAxis.viewWindow.min=e};var setMax=function(t,e){t.vAxis.viewWindow.max=e};var setBarMin=function(t,e){t.hAxis.viewWindow.min=e};var setBarMax=function(t,e){t.hAxis.viewWindow.max=e};var setStacked=function(t,e){t.isStacked=e||false};var setXtitle=function(t,e){t.hAxis.title=e;t.hAxis.titleTextStyle.italic=false};var setYtitle=function(t,e){t.vAxis.title=e;t.vAxis.titleTextStyle.italic=false};var f=jsOptionsFunc(d,hideLegend,setTitle,setMin,setMax,setStacked,setXtitle,setYtitle);var resize=function(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,true);t()};var v=function defaultExport(e){(this||t).name="google";(this||t).library=e};v.prototype.renderLineChart=function renderLineChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t={};false===e.options.curve&&(t.curveType="none");false===e.options.points&&(t.pointSize=0);var a=f(e,e.options,t);var o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"LineChart",o,a)}))};v.prototype.renderPieChart=function renderPieChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t={chartArea:{top:"10%",height:"80%"},legend:{}};e.options.colors&&(t.colors=e.options.colors);e.options.donut&&(t.pieHole=.5);"legend"in e.options&&hideLegend(t,e.options.legend);e.options.title&&setTitle(t,e.options.title);var a=merge(merge(d,t),e.options.library||{});var o=new r.library.visualization.DataTable;o.addColumn("string","");o.addColumn("number","Value");o.addRows(e.data);r.drawChart(e,"PieChart",o,a)}))};v.prototype.renderColumnChart=function renderColumnChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t=f(e,e.options);var a=r.createDataTable(e.data,e.xtype);r.drawChart(e,"ColumnChart",a,t)}))};v.prototype.renderBarChart=function renderBarChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t={hAxis:{gridlines:{color:"#ccc"}}};var a=jsOptionsFunc(d,hideLegend,setTitle,setBarMin,setBarMax,setStacked,setXtitle,setYtitle)(e,e.options,t);var o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"BarChart",o,a)}))};v.prototype.renderAreaChart=function renderAreaChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t={isStacked:true,pointSize:0,areaOpacity:.5};var a=f(e,e.options,t);var o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"AreaChart",o,a)}))};v.prototype.renderGeoChart=function renderGeoChart(e){var r=this||t;this.waitForLoaded(e,"geochart",(function(){var t={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}};var a=merge(merge(d,t),e.options.library||{});var o=new r.library.visualization.DataTable;o.addColumn("string","");o.addColumn("number",e.options.label||"Value");o.addRows(e.data);r.drawChart(e,"GeoChart",o,a)}))};v.prototype.renderScatterChart=function renderScatterChart(e){var r=this||t;this.waitForLoaded(e,(function(){var t={};var a=f(e,e.options,t);var o,n,i,s,l=e.data,c=[];for(o=0;o<l.length;o++){l[o].name=l[o].name||"Value";s=l[o].data;for(n=0;n<s.length;n++){var p=new Array(l.length+1);p[0]=s[n][0];p[o+1]=s[n][1];c.push(p)}}i=new r.library.visualization.DataTable;i.addColumn("number","");for(o=0;o<l.length;o++)i.addColumn("number",l[o].name);i.addRows(c);r.drawChart(e,"ScatterChart",i,a)}))};v.prototype.renderTimeline=function renderTimeline(e){var r=this||t;this.waitForLoaded(e,"timeline",(function(){var t={legend:"none"};e.options.colors&&(t.colors=e.options.colors);var a=merge(merge(d,t),e.options.library||{});var o=new r.library.visualization.DataTable;o.addColumn({type:"string",id:"Name"});o.addColumn({type:"date",id:"Start"});o.addColumn({type:"date",id:"End"});o.addRows(e.data);e.element.style.lineHeight="normal";r.drawChart(e,"Timeline",o,a)}))};v.prototype.destroy=function destroy(t){t.chart&&t.chart.clearChart()};v.prototype.drawChart=function drawChart(e,r,a,o){this.destroy(e);if(!e.destroyed){e.options.code&&window.console.log("var data = new google.visualization.DataTable("+a.toJSON()+");\nvar chart = new google.visualization."+r+"(element);\nchart.draw(data, "+JSON.stringify(o)+");");e.chart=new(this||t).library.visualization[r](e.element);resize((function(){e.chart.draw(a,o)}))}};v.prototype.waitForLoaded=function waitForLoaded(e,r,a){var o=this||t;if(!a){a=r;r="corechart"}h.push({pack:r,callback:a});if(u[r])this.runCallbacks();else{u[r]=true;var n={packages:[r],callback:function(){o.runCallbacks()}};var i=e.__config();i.language&&(n.language=i.language);"geochart"===r&&i.mapsApiKey&&(n.mapsApiKey=i.mapsApiKey);(this||t).library.charts.load("current",n)}};v.prototype.runCallbacks=function runCallbacks(){var e,r;for(var a=0;a<h.length;a++){e=h[a];r=(this||t).library.visualization&&("corechart"===e.pack&&(this||t).library.visualization.LineChart||"timeline"===e.pack&&(this||t).library.visualization.Timeline||"geochart"===e.pack&&(this||t).library.visualization.GeoChart);if(r){e.callback();h.splice(a,1);a--}}};v.prototype.createDataTable=function createDataTable(e,r){var a,o,n,i,s,l=[],c=[];for(a=0;a<e.length;a++){n=e[a];e[a].name=e[a].name||"Value";for(o=0;o<n.data.length;o++){i=n.data[o];s="datetime"===r?i[0].getTime():i[0];if(!l[s]){l[s]=new Array(e.length);c.push(s)}l[s][a]=toFloat(i[1])}}var p=[];var u=true;var h;for(o=0;o<c.length;o++){a=c[o];if("datetime"===r){h=new Date(toFloat(a));u=u&&isDay(h)}else h="number"===r?toFloat(a):a;p.push([h].concat(l[a]))}if("datetime"===r)p.sort(sortByTime);else if("number"===r){p.sort(sortByNumberSeries);for(a=0;a<p.length;a++)p[a][0]=toStr(p[a][0]);r="string"}var d=new(this||t).library.visualization.DataTable;r="datetime"===r&&u?"date":r;d.addColumn(r,"");for(a=0;a<e.length;a++)d.addColumn("number",e[a].name);d.addRows(p);return d};function formatSeriesData(t,e){var r,a,o=[];a="number"===e?toFloat:"datetime"===e?toDate:toStr;if("bubble"===e)for(r=0;r<t.length;r++)o.push([toFloat(t[r][0]),toFloat(t[r][1]),toFloat(t[r][2])]);else for(r=0;r<t.length;r++)o.push([a(t[r][0]),toFloat(t[r][1])]);"datetime"===e?o.sort(sortByTime):"number"===e&&o.sort(sortByNumberSeries);return o}function detectXType(t,e,r){return dataEmpty(t)?!r.xmin&&!r.xmax||r.xmin&&!isDate(r.xmin)||r.xmax&&!isDate(r.xmax)?"number":"datetime":detectXTypeWithFunction(t,isNumber)?"number":!e&&detectXTypeWithFunction(t,isDate)?"datetime":"string"}function detectXTypeWithFunction(t,e){var r,a,o;for(r=0;r<t.length;r++){o=toArr(t[r].data);for(a=0;a<o.length;a++)if(!e(o[a][0]))return false}return true}function copySeries(t){var e,r,a=[];for(e=0;e<t.length;e++){var o={};for(r in t[e])t[e].hasOwnProperty(r)&&(o[r]=t[e][r]);a.push(o)}return a}function processSeries(t,e,r){var a;var o=t.options;var n=t.rawData;t.singleSeriesFormat=!isArray(n)||"object"!==typeof n[0]||isArray(n[0]);t.singleSeriesFormat&&(n=[{name:o.label,data:n}]);n=copySeries(n);for(a=0;a<n.length;a++)n[a].data=toArr(n[a].data);t.xtype=e||(o.discrete?"string":detectXType(n,r,o));for(a=0;a<n.length;a++)n[a].data=formatSeriesData(n[a].data,t.xtype);return n}function processSimple(t){var e,r=toArr(t.rawData);for(e=0;e<r.length;e++)r[e]=[toStr(r[e][0]),toFloat(r[e][1])];return r}function dataEmpty(t,e){if("PieChart"===e||"GeoChart"===e||"Timeline"===e)return 0===t.length;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return false;return true}function addDownloadButton(e){var r=e.element;var a=document.createElement("a");var o=e.options.download;true===o?o={}:"string"===typeof o&&(o={filename:o});a.download=o.filename||"chart.png";a.style.position="absolute";a.style.top="20px";a.style.right="20px";a.style.zIndex=1e3;a.style.lineHeight="20px";a.target="_blank";var n=document.createElement("img");n.alt="Download";n.style.border="none";n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==";a.appendChild(n);r.style.position="relative";e.__downloadAttached=true;e.__enterEvent=addEvent(r,"mouseover",(function(n){var i=n.relatedTarget;if((!i||i!==(this||t)&&!childOf(this||t,i))&&e.options.download){a.href=e.toImage(o);r.appendChild(a)}}));e.__leaveEvent=addEvent(r,"mouseout",(function(e){var r=e.relatedTarget;r&&(r===(this||t)||childOf(this||t,r))||a.parentNode&&a.parentNode.removeChild(a)}))}function addEvent(t,e,r){if(t.addEventListener){t.addEventListener(e,r,false);return r}var fn2=function(){return r.call(t,window.event)};t.attachEvent("on"+e,fn2);return fn2}function removeEvent(t,e,r){t.removeEventListener?t.removeEventListener(e,r,false):t.detachEvent("on"+e,r)}function childOf(t,e){if(t===e)return false;while(e&&e!==t)e=e.parentNode;return e===t}var m=[],y=0,g=4;function pushRequest(t,e,r){m.push([t,e,r]);runNext()}function runNext(){if(y<g){var t=m.shift();if(t){y++;getJSON(t[0],t[1],t[2]);runNext()}}}function requestComplete(){y--;runNext()}function getJSON(t,e,r){ajaxCall(t,e,(function(t,e,a){var o="string"===typeof a?a:a.message;r(o)}))}function ajaxCall(t,e,r){var a=window.jQuery||window.Zepto||window.$;if(a&&a.ajax)a.ajax({dataType:"json",url:t,success:e,error:r,complete:requestComplete});else{var o=new XMLHttpRequest;o.open("GET",t,true);o.setRequestHeader("Content-Type","application/json");o.onload=function(){requestComplete();200===o.status?e(JSON.parse(o.responseText),o.statusText,o):r(o,"error",o.statusText)};o.send()}}var C={};var b=[];function setText(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function chartError(t,e,r){r||(e="Error Loading Chart: "+e);setText(t,e);t.style.color="#ff0000"}function errorCatcher(t){try{t.__render()}catch(e){chartError(t.element,e.message);throw e}}function fetchDataSource(t,e,r){r&&t.options.loading&&("string"===typeof e||"function"===typeof e)&&setText(t.element,t.options.loading);if("string"===typeof e)pushRequest(e,(function(e){t.rawData=e;errorCatcher(t)}),(function(e){chartError(t.element,e)}));else if("function"===typeof e)try{e((function(e){t.rawData=e;errorCatcher(t)}),(function(e){chartError(t.element,e,true)}))}catch(e){chartError(t.element,e,true)}else{t.rawData=e;errorCatcher(t)}}function getAdapterType(t){if(t){if("Highcharts"===t.product)return p;if(t.charts)return v;if(isFunction(t))return s}throw new Error("Unknown adapter")}function addAdapter(t){var e=getAdapterType(t);var r=new e(t);-1===b.indexOf(r)&&b.push(r)}function loadAdapters(){"Chart"in window&&addAdapter(window.Chart);"Highcharts"in window&&addAdapter(window.Highcharts);window.google&&window.google.charts&&addAdapter(window.google)}function renderChart(t,e){if(dataEmpty(e.data,t)){var r=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";setText(e.element,r)}else{callAdapter(t,e);e.options.download&&!e.__downloadAttached&&"chartjs"===e.adapter&&addDownloadButton(e)}}function callAdapter(t,e){var r,a,o,n;o="render"+t;n=e.options.adapter;loadAdapters();for(r=0;r<b.length;r++){a=b[r];if((!n||n===a.name)&&isFunction(a[o])){e.adapter=a.name;e.__adapterObject=a;return a[o](e)}}throw b.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}var z=function Chart(e,r,a){var o;if("string"===typeof e){o=e;e=document.getElementById(e);if(!e)throw new Error("No element with id "+o)}(this||t).element=e;(this||t).options=merge(O.options,a||{});(this||t).dataSource=r;O.charts[e.id]=this||t;fetchDataSource(this||t,r,true);(this||t).options.refresh&&this.startRefresh()};z.prototype.getElement=function getElement(){return(this||t).element};z.prototype.getDataSource=function getDataSource(){return(this||t).dataSource};z.prototype.getData=function getData(){return(this||t).data};z.prototype.getOptions=function getOptions(){return(this||t).options};z.prototype.getChartObject=function getChartObject(){return(this||t).chart};z.prototype.getAdapter=function getAdapter(){return(this||t).adapter};z.prototype.updateData=function updateData(e,r){(this||t).dataSource=e;r&&this.__updateOptions(r);fetchDataSource(this||t,e,true)};z.prototype.setOptions=function setOptions(t){this.__updateOptions(t);this.redraw()};z.prototype.redraw=function redraw(){fetchDataSource(this||t,(this||t).rawData)};z.prototype.refreshData=function refreshData(){if("string"===typeof(this||t).dataSource){var e=-1===(this||t).dataSource.indexOf("?")?"?":"&";var r=(this||t).dataSource+e+"_="+(new Date).getTime();fetchDataSource(this||t,r)}else"function"===typeof(this||t).dataSource&&fetchDataSource(this||t,(this||t).dataSource)};z.prototype.startRefresh=function startRefresh(){var e=this||t;var r=(this||t).options.refresh;if(r&&"string"!==typeof(this||t).dataSource&&"function"!==typeof(this||t).dataSource)throw new Error("Data source must be a URL or callback for refresh");if(!(this||t).intervalId){if(!r)throw new Error("No refresh interval");(this||t).intervalId=setInterval((function(){e.refreshData()}),1e3*r)}};z.prototype.stopRefresh=function stopRefresh(){if((this||t).intervalId){clearInterval((this||t).intervalId);(this||t).intervalId=null}};z.prototype.toImage=function toImage(e){if("chartjs"===(this||t).adapter){if(e&&e.background&&"transparent"!==e.background){var r=(this||t).chart.canvas;var a=(this||t).chart.ctx;var o=document.createElement("canvas");var n=o.getContext("2d");o.width=a.canvas.width;o.height=a.canvas.height;n.fillStyle=e.background;n.fillRect(0,0,o.width,o.height);n.drawImage(r,0,0);return o.toDataURL("image/png")}return(this||t).chart.toBase64Image()}throw new Error("Feature only available for Chart.js")};z.prototype.destroy=function destroy(){(this||t).destroyed=true;this.stopRefresh();(this||t).__adapterObject&&(this||t).__adapterObject.destroy(this||t);(this||t).__enterEvent&&removeEvent((this||t).element,"mouseover",(this||t).__enterEvent);(this||t).__leaveEvent&&removeEvent((this||t).element,"mouseout",(this||t).__leaveEvent)};z.prototype.__updateOptions=function __updateOptions(e){var r=e.refresh&&e.refresh!==(this||t).options.refresh;(this||t).options=merge(O.options,e);if(r){this.stopRefresh();this.startRefresh()}};z.prototype.__render=function __render(){(this||t).data=this.__processData();renderChart(this.__chartName(),this||t)};z.prototype.__config=function __config(){return C};var x=function(e){function LineChart(){e.apply(this||t,arguments)}e&&(LineChart.__proto__=e);LineChart.prototype=Object.create(e&&e.prototype);LineChart.prototype.constructor=LineChart;LineChart.prototype.__processData=function __processData(){return processSeries(this||t)};LineChart.prototype.__chartName=function __chartName(){return"LineChart"};return LineChart}(z);var M=function(e){function PieChart(){e.apply(this||t,arguments)}e&&(PieChart.__proto__=e);PieChart.prototype=Object.create(e&&e.prototype);PieChart.prototype.constructor=PieChart;PieChart.prototype.__processData=function __processData(){return processSimple(this||t)};PieChart.prototype.__chartName=function __chartName(){return"PieChart"};return PieChart}(z);var w=function(e){function ColumnChart(){e.apply(this||t,arguments)}e&&(ColumnChart.__proto__=e);ColumnChart.prototype=Object.create(e&&e.prototype);ColumnChart.prototype.constructor=ColumnChart;ColumnChart.prototype.__processData=function __processData(){return processSeries(this||t,null,true)};ColumnChart.prototype.__chartName=function __chartName(){return"ColumnChart"};return ColumnChart}(z);var _=function(e){function BarChart(){e.apply(this||t,arguments)}e&&(BarChart.__proto__=e);BarChart.prototype=Object.create(e&&e.prototype);BarChart.prototype.constructor=BarChart;BarChart.prototype.__processData=function __processData(){return processSeries(this||t,null,true)};BarChart.prototype.__chartName=function __chartName(){return"BarChart"};return BarChart}(z);var A=function(e){function AreaChart(){e.apply(this||t,arguments)}e&&(AreaChart.__proto__=e);AreaChart.prototype=Object.create(e&&e.prototype);AreaChart.prototype.constructor=AreaChart;AreaChart.prototype.__processData=function __processData(){return processSeries(this||t)};AreaChart.prototype.__chartName=function __chartName(){return"AreaChart"};return AreaChart}(z);var S=function(e){function GeoChart(){e.apply(this||t,arguments)}e&&(GeoChart.__proto__=e);GeoChart.prototype=Object.create(e&&e.prototype);GeoChart.prototype.constructor=GeoChart;GeoChart.prototype.__processData=function __processData(){return processSimple(this||t)};GeoChart.prototype.__chartName=function __chartName(){return"GeoChart"};return GeoChart}(z);var D=function(e){function ScatterChart(){e.apply(this||t,arguments)}e&&(ScatterChart.__proto__=e);ScatterChart.prototype=Object.create(e&&e.prototype);ScatterChart.prototype.constructor=ScatterChart;ScatterChart.prototype.__processData=function __processData(){return processSeries(this||t,"number")};ScatterChart.prototype.__chartName=function __chartName(){return"ScatterChart"};return ScatterChart}(z);var T=function(e){function BubbleChart(){e.apply(this||t,arguments)}e&&(BubbleChart.__proto__=e);BubbleChart.prototype=Object.create(e&&e.prototype);BubbleChart.prototype.constructor=BubbleChart;BubbleChart.prototype.__processData=function __processData(){return processSeries(this||t,"bubble")};BubbleChart.prototype.__chartName=function __chartName(){return"BubbleChart"};return BubbleChart}(z);var k=function(e){function Timeline(){e.apply(this||t,arguments)}e&&(Timeline.__proto__=e);Timeline.prototype=Object.create(e&&e.prototype);Timeline.prototype.constructor=Timeline;Timeline.prototype.__processData=function __processData(){var e,r=(this||t).rawData;for(e=0;e<r.length;e++){r[e][1]=toDate(r[e][1]);r[e][2]=toDate(r[e][2])}return r};Timeline.prototype.__chartName=function __chartName(){return"Timeline"};return Timeline}(z);var O={LineChart:x,PieChart:M,ColumnChart:w,BarChart:_,AreaChart:A,GeoChart:S,ScatterChart:D,BubbleChart:T,Timeline:k,charts:{},configure:function(t){for(var e in t)t.hasOwnProperty(e)&&(C[e]=t[e])},setDefaultOptions:function(t){O.options=t},eachChart:function(t){for(var e in O.charts)O.charts.hasOwnProperty(e)&&t(O.charts[e])},destroyAll:function(){for(var t in O.charts)if(O.charts.hasOwnProperty(t)){O.charts[t].destroy();delete O.charts[t]}},config:C,options:{},adapters:b,addAdapter:addAdapter,use:function(t){addAdapter(t);return O}};if("undefined"!==typeof window&&!window.Chartkick){window.Chartkick=O;document.addEventListener("turbolinks:before-render",(function(){false!==C.autoDestroy&&O.destroyAll()}));document.addEventListener("turbo:before-render",(function(){false!==C.autoDestroy&&O.destroyAll()}));setTimeout((function(){window.dispatchEvent(new Event("chartkick:load"))}),0)}O.default=O;return O}));var r=e;export{r as default};

